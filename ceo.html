<!DOCTYPE html>
<html>
<head>
  <title>CEO Dashboard - Denis</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<h2>CEO Dashboard - Denis</h2>

<h3>Create Task</h3>
<input id="taskTitle" placeholder="Task title">
<input type="date" id="taskDeadline">
<select id="taskPriority">
  <option value="Low">Low</option>
  <option value="Medium">Medium</option>
  <option value="High">High</option>
</select>
<select id="assignUser">
  <option value="dominic">Dominic</option>
  <option value="anne">Anne</option>
  <option value="mary">Mary</option>
</select>

<button onclick="createTask()">Assign Task</button>

<h3>All Tasks</h3>
<div id="allTasks"></div>

<script>
let tasks = JSON.parse(localStorage.getItem("tasks") || "[]");

// Create a new task
function createTask(){
  const title = document.getElementById("taskTitle").value;
  const deadline = document.getElementById("taskDeadline").value;
  const priority = document.getElementById("taskPriority").value;
  const person = document.getElementById("assignUser").value;

  if(!title || !deadline){
    alert("Please enter task title and deadline");
    return;
  }

  const t = {
    title,
    person,
    status: "Assigned",
    priority,
    deadline,
    createdAt: new Date().toLocaleString(),
    submission: null
  };

  tasks.push(t);
  localStorage.setItem("tasks", JSON.stringify(tasks));
  loadTasks();
}

// Load tasks for CEO view
function loadTasks(){
  const box = document.getElementById("allTasks");
  box.innerHTML = "";

  tasks.forEach((t,index)=>{
    // Color badges based on status
    let statusColor = t.status === "Done" ? "#4CAF50" :
                      t.status === "Submitted" ? "#FFC107" : "#2196F3";
    let priorityColor = t.priority === "High" ? "#FF4C4C" :
                        t.priority === "Medium" ? "#FFB74D" : "#81C784";

    box.innerHTML += `
      <div class="task-card">
        <div>
          <p><strong>${t.title}</strong></p>
          <p>Assigned to: ${t.person}</p>
          <p>Deadline: ${t.deadline}</p>
          <p>Priority: <span style="color:${priorityColor}">${t.priority}</span></p>
          <p>Status: <span style="color:${statusColor}">${t.status}</span></p>
          <p>Created: ${t.createdAt}</p>
          <p>Submission: ${t.submission || "Not submitted"}</p>
        </div>
        <div>
          ${t.status !== "Done" ? `<button onclick="markDone(${index})">Mark Done</button>` : ""}
        </div>
      </div>
    `;
  });
}

// Mark task done
function markDone(index){
  tasks[index].status = "Done";
  localStorage.setItem("tasks", JSON.stringify(tasks));
  loadTasks();
}

// Initial load
loadTasks();
</script>

</body>
</html>
